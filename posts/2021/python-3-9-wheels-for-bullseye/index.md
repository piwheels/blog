
<p>Debian 11 (Bullseye) <s>is due to be released shortly</s> is now released, and Raspberry Pi OS <s>will follow suit</s> <a href="https://www.raspberrypi.com/news/raspberry-pi-os-debian-bullseye/">is also released</a>. Bullseye comes with Python 3.9, so we needed to rebuild all platform wheels for the new ABI.</p>
<p>We've added a Bullseye column to the versions table on project pages to show the status of each build:</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><img sizes="auto, (max-width: 1024px) 100vw, 1024px" src="images/Screenshot-2021-07-22-at-00.19.50-1024x294.png"/></figure></div>
<p>When piwheels started, we built for Jessie (Python 3.4), and moved onto Stretch (Python 3.5) when it was released. We stopped building on Jessie when it reached EOL, and we'll continue to iterate like this. Although Python 3.5 itself is EOL, Debian Stretch still has another year of support so we'll continue building on it until then:</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><img sizes="auto, (max-width: 1024px) 100vw, 1024px" src="images/Screenshot-2021-07-22-at-00.42.28-1024x293.png"/></figure></div>
<p>We employed a scaled-up approach to clearing the cp39 backlog, provisioning 22 Raspberry Pi 4s to work their way through attempting to build wheels of everything in the queue. Once it cleared those we dropped back to around 5 Pis per ABI in order to keep up with new releases.</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><img sizes="auto, (max-width: 904px) 100vw, 904px" src="images/Screenshot-from-2021-08-01-11-13-03-904x1024.png"/><figcaption>The piwheels monitor once the queue had cleared</figcaption></figure></div>
<p>Thanks to <a href="https://www.mythic-beasts.com/">Mythic Beasts</a> for supporting us through this process.</p>
<p>We now have a total of <strong>43,966</strong> cp34m wheels, <strong>68,818</strong> cp35m wheels, <strong>81,293</strong> cp37m wheels and <strong>69,769</strong> cp39 wheels.</p>
<p>Python package builds are getting more complex, with maintainers now using golang and rust in their builds as well as C/C++. Maintainers are increasingly specifying build requirements, meaning installing tools with pip in order to start the build. We recently changed the pip command we use to build to allow pip to install build requirements from piwheels while building source attained from PyPI – otherwise they were ending up building several packages from source before even getting started trying to build the intended package. Maintainers are also increasingly utilising tools like poetry and whey to specify custom build systems which are difficult to debug.</p>
<p>Some build scan take several hours – particularly packages like spacy and opencv. A recent build of spacy-nightly on Bullseye took 3 hours 55 mins, a previous build of opencv-contrib-python-headless on Buster took 5 hours 13 mins, and spacy-train-tools on Buster took 6 hours 46 mins!</p>
<h2 class="wp-block-heading">Project page updates</h2>
<p>We use a GitHub repo to manage issues with packages we have on piwheels, when people find that packages are missing or don't work as expected. Previously we used issue templates on GitHub, but often people failed to complete them properly. Fortunately, GitHub just rolled out <a href="https://github.blog/changelog/2021-06-23-issues-forms-beta-for-public-repositories/">issue forms</a>, so we've added them and integrated the project pages so that clicking on one of the new issue buttons completes the form, allowing people to give extra information and not be able to continue without filling out all the required fields.</p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile"><figure class="wp-block-media-text__media"><img sizes="auto, (max-width: 746px) 100vw, 746px" src="images/Screenshot-2021-07-22-at-00.52.51.png"/></figure><div class="wp-block-media-text__content">
<p class="has-large-font-size"></p>
</div></div>
<p>Clicking new issue on the numpy page brings you here, form filled in automatically:</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><img sizes="auto, (max-width: 814px) 100vw, 814px" src="images/Screenshot-2021-07-22-at-00.53.44-814x1024.png"/></figure></div>
<p>We also added support for Twitter cards on project pages, so when people tweet links to projects, it'll show the piwheels logo and the project description:</p>
<figure class="wp-block-embed aligncenter is-type-rich is-provider-twitter wp-block-embed-twitter"><div class="wp-block-embed__wrapper">
<blockquote class="twitter-tweet" data-dnt="true" data-width="500"><p dir="ltr" lang="en"><a href="https://twitter.com/waveform80?ref_src=twsrc%5Etfw">@waveform80</a> we got twitter cards <a href="https://t.co/DZUM4M6vJq">https://t.co/DZUM4M6vJq</a></p>— Ben Nuttall (@ben_nuttall) <a href="https://twitter.com/ben_nuttall/status/1417972828863873024?ref_src=twsrc%5Etfw">July 21, 2021</a></blockquote><script async="" charset="utf-8" src="https://platform.twitter.com/widgets.js"></script>
</div></figure>
<p>We also recently surpassed <strong>50 million downloads</strong>, and have saved over <strong>500 years </strong>of build time!</p>
